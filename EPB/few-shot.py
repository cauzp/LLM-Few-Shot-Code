
classifier = APIClassifier(
    api_url=API_URL,
    api_key=API_KEY,
    classifications=CLASSIFICATIONS,
    messages_pattern=MESSAGES_PATTERN,
    # enable_thinking=True,
    model="DeepSeek-R1-671B", #  或者 "gpt-3.5-turbo", "gpt-4o-2024-08-06" 等您选择的模型
    temperature=0,         # 分类任务建议为0以保证一致性
    concurrency_limit=30   # 请根据您的API速率限制调整，100可能过高
)

CLASSIFICATIONS = {
    "技术治理与深圳速度": "评论高度肯定深圳市政府的响应速度和执行效率，将卷尺哥曝光问题后的快速整改视为'深圳速度'的体现，强调政府部门事事有回应、件件有着落的工作作风。",
    
    "公民参与与监督意识": "评论赞扬卷尺哥主动发现并反馈城市问题的行为，将其视为公民监督权的正当行使，认为这种较真精神和参与意识值得提倡，体现了市民的主人翁意识。",
    
    "地域对比与发展差异": "评论通过对比深圳与其他城市（尤其是山东、东北等地）的差异，凸显深圳的特殊性和优越性，暗示或明示其他地方会'解决提问题的人'而非解决问题本身。",
    
    "财政实力与资源支撑": "评论强调深圳快速整改的背后是雄厚的财政实力和资源支持，认为'有钱'是深圳速度的根本原因，其他城市缺乏同等经济基础难以复制。",
    
    "制度信任与政府形象": "评论表达对深圳政府的高度信任和认可，认为深圳'听劝'、务实、不推诿，将其塑造为理想政府形象；同时对比其他地区政府的低效或官僚作风。",
    
    "可复制性质疑与推广期待": "评论质疑深圳模式能否在其他城市推广，认为这需要特定的经济、制度、文化条件；或表达希望全国学习深圳经验、推广卷尺哥模式的诉求。",
    
    "双向奔赴与良性互动": "评论强调卷尺哥与深圳市政之间的相互配合和良性循环，将其描述为'市民发现问题-政府快速解决'的理想互动模式，认为这是城市进步的关键。",
    
    "工作想象与调侃玩梗": "评论通过幽默、调侃、反讽等方式表达对事件的态度，如'市政上班第一件事看卷尺哥抖音'、'多管局局长'等网络梗，主打娱乐化解读。",
    
    "全国巡检与实用诉求": "评论希望卷尺哥来到自己所在城市进行类似监督，或呼吁当地也出现'卷尺哥'式人物，表达对改善本地城市建设的迫切需求。",
    
    "其他/无关调侃闲聊": "不属于以上明确类别的评论内容，包括对博主个人的评论、完全无关的话题、纯粹的点赞感叹、询问技术细节等零散内容。"
}

EXAMPLES = [
    # 技术治理与深圳速度
    {"discussion": "深圳速度不是吹的，那是真办事，十年前就感觉到了", "classification": "技术治理与深圳速度"},
    {"discussion": "这执行力，活该人家经济发达", "classification": "技术治理与深圳速度"},
    {"discussion": "晚上21:55发的，让苏州人看看啥是深圳速度", "classification": "技术治理与深圳速度"},
    
    # 公民参与与监督意识
    {"discussion": "请不要嘲笑敢于反抗的人，他争取到的光，同样会照亮你", "classification": "公民参与与监督意识"},
    {"discussion": "这才是真正行使监督权，人民有权监督和提议", "classification": "公民参与与监督意识"},
    {"discussion": "每个城市都需要这样较真的人，城市才会进步", "classification": "公民参与与监督意识"},
    
    # 地域对比与发展差异
    {"discussion": "也就深圳而已，你来山东试试，上午发下午就找你了", "classification": "地域对比与发展差异"},
    {"discussion": "其他地方，第一天发，第二天卷尺哥没了", "classification": "地域对比与发展差异"},
    {"discussion": "我们这处理的也很快呀。大哥第2天就没了", "classification": "地域对比与发展差异"},
    
    # 财政实力与资源支撑
    {"discussion": "主要深圳是真的有钱，一年3万多亿GDP呢", "classification": "财政实力与资源支撑"},
    {"discussion": "深圳：我的钱终于花的出去了", "classification": "财政实力与资源支撑"},
    {"discussion": "速度是靠强大的财力支撑的", "classification": "财政实力与资源支撑"},
    
    # 制度信任与政府形象
    {"discussion": "深圳政府的心里还是装着群众的", "classification": "制度信任与政府形象"},
    {"discussion": "这才是政府该有的样子，不是解决人而是解决问题", "classification": "制度信任与政府形象"},
    {"discussion": "深圳市政不但真诚面对问题，也把流量拿捏稳稳", "classification": "制度信任与政府形象"},
    
    # 可复制性质疑与推广期待
    {"discussion": "全国都需要这样稽核内卷一下，希望全国推广", "classification": "可复制性质疑与推广期待"},
    {"discussion": "深圳这套机制是不是可以全国推广", "classification": "可复制性质疑与推广期待"},
    {"discussion": "不要学他，这个赛道只有在深圳能玩", "classification": "可复制性质疑与推广期待"},
    
    # 双向奔赴与良性互动
    {"discussion": "一个愿意去提醒，一个愿意立刻去修整，完美", "classification": "双向奔赴与良性互动"},
    {"discussion": "事事有回应，件件有着落，这就是深圳", "classification": "双向奔赴与良性互动"},
    {"discussion": "深圳市政不就是理想男友么：事事有回应，件件有着落", "classification": "双向奔赴与良性互动"},
    
    # 工作想象与调侃玩梗
    {"discussion": "深圳市政上班第一件事，翻看他抖音看看有没有工作安排", "classification": "工作想象与调侃玩梗"},
    {"discussion": "原来你就是深圳多管局局长", "classification": "工作想象与调侃玩梗"},
    {"discussion": "市政：上班了，打开抖音看看今天的工作内容", "classification": "工作想象与调侃玩梗"},
    
    # 全国巡检与实用诉求
    {"discussion": "卷尺哥别老呆在深圳了，来个全国微访吧", "classification": "全国巡检与实用诉求"},
    {"discussion": "哥，来我们东莞看看吧，这边素材多", "classification": "全国巡检与实用诉求"},
    {"discussion": "建议卷尺哥全国巡检，每个城市都需要", "classification": "全国巡检与实用诉求"},
    
    # 其他/无关调侃闲聊
    {"discussion": "卷尺哥麻烦量一下我的工资厚度", "classification": "其他/无关调侃闲聊"},
    {"discussion": "上央视新闻了，这次真没骗你们", "classification": "其他/无关调侃闲聊"},
    {"discussion": "他不是送外卖的吗，怎么有时间天天拍", "classification": "其他/无关调侃闲聊"}
]

MESSAGES_PATTERN = [
    {"role": "system", "content": """你是一个社交媒体评论分类助手。

【事件背景】
深圳"卷尺哥"是一位从2023年3月开始在抖音平台发布视频的热心市民，他手持卷尺走街串巷，记录城市公共设施存在的问题，包括路灯、井盖、天桥、非机动车道等。截至2025年10月，他已发布千余条视频，大多数问题在视频发布后被深圳市政迅速整改，被网友称为"秒整改"和"深圳多管局局长"。这一现象引发了关于城市治理效率、公民参与、地域发展差异、政府回应机制等多方面的广泛讨论。

【分类任务】
请根据评论的主要主题和核心观点对深圳"卷尺哥"事件相关的社交媒体评论进行分类。

【分类要求】
1. 每条评论只分配最主要的一个主题类别
2. 优先考虑评论的核心内容和价值立场，而非表面情绪
3. 注意识别评论中的反讽、对比、隐喻等修辞手法
4. 重点关注评论者的态度取向：是赞扬深圳、批判其他地区、表达诉求，还是单纯娱乐
5. 对于包含多个主题的评论，选择最突出、最核心的分类维度"""}, 
    
    {"role": "user", "content": "以下是分类及其描述:\n{classifications}\n\n以下是示例:\n{examples}"}, 
    
    {"role": "user", "content": "请为以下评论分配一个主题类别，只需回复类别名称，不需要输出其他内容:\n{text}"} 
]
